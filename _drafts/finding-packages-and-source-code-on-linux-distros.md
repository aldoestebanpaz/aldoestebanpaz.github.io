# Finding packages and source code on Linux distros

In the following examples I show how to proceed for finding the package and source code project behind the `lxqt-admin-user` binary.

## Finding the process that a window (GUI) belongs to

It is possible to discover which process a window belongs to by using the `xprop` command line tool (which is part of the Debian package `x11-utils`).

When you run tools like `xprop` or `xwininfo` you have to click on the target window. If the desired window is not visible, use Alt+Tab to bring it to the foreground.

### Output the PID

Run either:

```sh
xprop _NET_WM_PID
# prints:
#   _NET_WM_PID(CARDINAL) = 22044
```

or:

```sh
xprop _NET_WM_PID | sed 's/_NET_WM_PID(CARDINAL) = //'
# prints:
#   22044
```

### Output PPID, PID and command

Run the following to output the parent process ID (PPID), process ID (PID) and the complete command used for executing a process:

```sh
ps ww -o ppid=,pid=,cmd= -q `xprop _NET_WM_PID | sed 's/_NET_WM_PID(CARDINAL) = //'`
# prints:
#   1   22044 /usr/bin/lxqt-admin-user
```

## dpkg and apt based (Debian and Ubuntu)

### Binary package vs Source package

#### Binary package

A Binary package is a file that ends in .deb and contains software for your Debian system. A Debian package is smart enough to know how to add itself to your system, remove itself, and even configure itself to your needs.

`ar t <debfile>` displays the list of files contained in a .deb archive.

A Debian package (.deb) is an `ar` archive that is comprised of three files:

- `debian-binary` - This is a text file which simply indicates the version of the .deb file package format version. In Debian Buster it is still version 2.0.
- `control.tar.xz`- This archive file contains all of the available meta-information, like the name and version of the package as well as some scripts to run before, during or after (un-)installation of it. Some of the meta-information allows package management tools to determine if it is possible to install or uninstall it, for example according to the list of packages already on the machine, and if files shipped have been modified locally.
- `data.tar.xz`, `data.tar.bz2`, `data.tar.gz` - This archive contains all of the files to be extracted from the package; this is where the executable files, libraries, documentation, etc., are all stored. Packages may use different compression formats, in which case the file will be named differently for xz, bzip2 or gzip.

More info: https://debian-handbook.info/browse/stable/packaging-system.html

#### Source package

Source packages provide you with all of the necessary files to compile or otherwise, build the desired piece of software.

A Debian source package in the "3.0 (quilt)" format consists of the following files:

- `package_version.orig.tar.xz` - The upstream tarball. `package-version.orig.tar.xz` is a copy or symlink of `package-version.tar.gz`.
- `package_version-revision.debian.tar.xz` - A tarball of `package-version/debian/*`, the Debian package specification files. These files are added to the upstream source under the `package-version/debian/` directory.
- `package_version-revision.dsc` - The Debian source control file. The file is generated by `dpkg-source` when it builds the source archive, from other files in the source package. When unpacking, it is checked against the files and directories in the other parts of the source package. More info: https://www.debian.org/doc/debian-policy/ch-controlfields.html.
- `package_version.orig.tar.xz.asc` - A PGP signature file used to verify the integrity of the upstream tarball.

In our example for `lxqt-admin` in ubuntu hirsute, the files are the following:

```
lxqt-admin-0.16.0
lxqt-admin_0.16.0-1ubuntu1.debian.tar.xz
lxqt-admin_0.16.0-1ubuntu1.dsc
lxqt-admin_0.16.0.orig.tar.xz
lxqt-admin_0.16.0.orig.tar.xz.asc
```

More info: https://www.debian.org/doc/manuals/debmake-doc/ch05.en.html

### Finding the installed package that a file belongs to

Run either:

```sh
dpkg -S /usr/bin/lxqt-admin-user
# prints:
#   lxqt-admin: /usr/bin/lxqt-admin-user
```

or, if it is a binary:

```sh
dpkg -S `which lxqt-admin-user`
# prints:
#   lxqt-admin: /usr/bin/lxqt-admin-user
```
### Listing files inside the installed package

Run:

```sh
dpkg -L lxqt-admin
# prints:
#   /.
#   /usr
#   /usr/bin
#   /usr/bin/lxqt-admin-time
#   /usr/bin/lxqt-admin-user
#   /usr/bin/lxqt-admin-user-helper
#   /usr/share
#   /usr/share/applications
#   /usr/share/applications/lxqt-admin-time.desktop
#   /usr/share/applications/lxqt-admin-user.desktop
#   /usr/share/doc
#   /usr/share/doc/lxqt-admin
#   /usr/share/doc/lxqt-admin/AUTHORS
#   /usr/share/doc/lxqt-admin/README.md.gz
#   /usr/share/doc/lxqt-admin/changelog.Debian.gz
#   /usr/share/doc/lxqt-admin/copyright
#   /usr/share/lintian
#   /usr/share/lintian/overrides
#   /usr/share/lintian/overrides/lxqt-admin
#   /usr/share/polkit-1
#   /usr/share/polkit-1/actions
#   /usr/share/polkit-1/actions/org.lxqt.lxqt-admin-user.policy
```

### Extracting information from the package

You can run the following commands for extracting information about the installed package:
- `dpkg -s lxqt-admin` - shows description, dependencies, and project homepage.
- `apt-cache show lxqt-admin` - shows description, dependencies, and project homepage as well.
- `apt-cache showpkg lxqt-admin` - shows versions, dependencies, and reverse dependencies.
- `/usr/share/doc/lxqt-admin/copyright` - sometimes shows the link to the original page/repository of the project.
- `zless /usr/share/doc/lxqt-admin/README.md.gz` - the README file can contain any kind of information, it is usually compressed with gzip and that is why we use `zless`.

### Finding the binary package

Note "binary package" and "package" are synonyms.

#### In Debian

You can either:

- Generate an URL using `https://packages.debian.org/name` and your package name. For example, `https://packages.debian.org/lxqt-admin`.
- Generate an URL using `https://packages.debian.org/search?keywords=name` and your package name. For example, `https://packages.debian.org/search?keywords=lxqt-admin`.
- Going to `https://packages.debian.org/` and searching the package manually.

The page shows multiple options all related to an specific debian release (aka suite) codename like strech, buster, bullseye, bookworm and sid (the development distribution of Debian). You can get more information about Debian suites in [https://wiki.debian.org/DebianReleases](https://wiki.debian.org/DebianReleases) and also you can see what suite your distro is using by running `cat /etc/debian_version`.

The option "sid" ([Debian Unestable](https://wiki.debian.org/DebianUnstable)) is probably the best option. It is not strictly a release, but rather a "rolling development" version of the Debian distribution containing the latest packages that have been introduced into Debian.

For this example I can see the most up to date information about a package going to `https://packages.debian.org/sid/lxqt-admin`.

#### In Ubuntu

You can either:

- Generate an URL using `https://packages.ubuntu.com/name` and your package name. For example, `https://packages.ubuntu.com/lxqt-admin`.
- Generate an URL using `https://packages.ubuntu.com/search?keywords=name` and your package name. For example, `https://packages.ubuntu.com/search?keywords=lxqt-admin`.
- Going to `https://packages.ubuntu.com/` and searching the package manually.

The page shows multiple options all related to an specific ubuntu release codename like hirsute (Ubuntu 21.04), bionic (Ubuntu 18.04) and focal (Ubuntu 20.04). You can get more information about Ubuntu releases in [https://wiki.ubuntu.com/Releases](https://wiki.ubuntu.com/Releases) and [https://ubuntu.com/about/release-cycle](https://ubuntu.com/about/release-cycle), and also you can see what release your distro is using by running `lsb_release -a`.

For this example I can see the information about a package for hirsute going to `https://packages.ubuntu.com/hirsute/lxqt-admin`. This page shows the title "Package: lxqt-admin (0.16.0-1ubuntu1) [universe]" that means that this package is located in the repository called "universe".

**What about an unestable release in Ubuntu?**

Source: https://askubuntu.com/questions/1341024/is-there-ubuntu-unstable-development-like-debian-sid-unstable

There is no "rolling development" version for Ubuntu like Sid on Debian. In other words, there's no singular name like sid or Unstable in Debian to constantly track 'development'.

You will need to keep upgrading/installing the in-development releases during the dev cycles to get the 'latest development' track. The current in-development release appears in the 'Future' section in [https://wiki.ubuntu.com/Releases](https://wiki.ubuntu.com/Releases).

Also there is no 'magical' way to continue to track the development or unstable branches after a release is complete - except to 'upgrade' to the development release via `do-release-upgrade -d` on that system. However, that isn't guaranteed to work, so you'd have to do a reinstall with the ISOs for that development release to guarantee you're on that devel track, and repeat the same behavior every time a new release is being developed.

### Finding the source spackage in Debian

A "binary package" (or just "package") is different than a "source package". A source package could be the source of more than one package, in other words one or more binary packages can be derived from a single source package. For example, the page for the source package "shadow" (the shadow tools aka. shadow-utils, https://packages.debian.org/source/sid/shadow) shows that binary packages "libsubid-dev", "libsubid4", "login", "passwd" and "uidmap" are built from it.

In our example the name of both the package and the source package are the same. But from the source package lxqt-admin derives two binary packages, lxqt-admin and lxqt-admin-l10n.

#### In Debian

You can get the link to the source package from a specific package page in packages.debian.org. For example, if you go to `https://packages.debian.org/sid/lxqt-admin` you will see a link to the source package page in the top-left side of the page: `https://packages.debian.org/source/sid/lxqt-admin`.

Other alternative is opening the "Developer Information" link that appears in the same page in the right side. In this example it is `https://tracker.debian.org/pkg/lxqt-admin`. This page shows the link to the source package too, `https://packages.debian.org/src:lxqt-admin` in this case.

`https://packages.debian.org/src:lxqt-admin` shows the options for the different debian releases, while `https://packages.debian.org/source/sid/lxqt-admin` is the source package specific for the sid (unestable) suite.

#### In Ubuntu

You can get the link to the source package from a specific package page in packages.ubuntu.com. For example, if you go to `https://packages.ubuntu.com/hirsute/lxqt-admin` you will see a link to the source package page in the top-left side of the page: `https://packages.ubuntu.com/source/hirsute/lxqt-admin`.

A second alternative is looking the "Download Source Package" link that appears in the same page in the right side.

Another alternative is using the `https://packages.ubuntu.com/src:name` template, for example `https://packages.ubuntu.com/src:lxqt-admin`. This page shows the options for the different ubuntu releases.

### Finding the repository with files for packaging

#### In Debian

You can get the link:
- Opening the source package page `https://packages.debian.org/source/sid/lxqt-admin` and clicking the "Debian Source Repository" link.
- Opening the Developer Information page `https://tracker.debian.org/pkg/lxqt-admin` and clicking the VCS's Browse link.

The link in this example is `https://salsa.debian.org/lxqt-team/lxqt-admin`.

#### In Ubuntu

You can get the link in the source package page:
- In the "Debian Source Repository" link at the right side.
- In the "Debian Package Source Repository (Browsable)" link at the buttom of the page.

The link in this example is `https://phab.lubuntu.me/source/lxqt-admin/`.

### Finding the upstream (original) repository

#### In Debian

You can get the link:
- Opening the binary package page `https://packages.debian.org/sid/lxqt-admin` and clicking the "Homepage" link.
- Opening the source package page `https://packages.debian.org/source/sid/lxqt-admin` and clicking the "Homepage" link.
- Opening the Developer Information page `https://tracker.debian.org/pkg/lxqt-admin` and clicking the "homepage" link.
- Following one of the options listed in the "Extracting information from the package" section above.

The link in this example is `https://github.com/lxqt/lxqt-admin`.

#### In Ubuntu

You can get the link in the source package page. You can find it in the "Homepage" link at the right side.

### How to download a binary package

```sh
# Download the .deb archive file
apt-get download lxqt-admin
# Extract the files from the archive
mkdir ./deb_bin_files && ar vx --output ./deb_bin_files lxqt-admin_0.16.0-1ubuntu1_amd64.deb
# Extract the .xz (with -J) archive with installable files
cd deb_bin_files
mkdir ./data && tar -xJvf data.tar.xz -C ./data
```

### How to download a source package

1. Add or uncomment the `deb-src` entry in your `/etc/apt/sources.list` file. In my case I'm using Ubuntu 21.04 (hirsute) here:

```sh
# sudo vi /etc/apt/sources.list

# Main (Canonical-supported free and open-source software)
# and Restricted (Proprietary drivers for devices) repositories.
deb-src http://archive.ubuntu.com/ubuntu/ hirsute main restricted
# Universe (Community-maintained free and open-source software) repository.
deb-src http://archive.ubuntu.com/ubuntu/ hirsute universe
```

2. Retrieve the updated package lists:

```sh
sudo apt-get update
```

3. Download the source package:

```sh
apt-get source lxqt-admin
```
